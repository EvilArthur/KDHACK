Index: main.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import telebot\r\nfrom func.take_base import take_base_clubs\r\nfrom func.sorting import sorting\r\nfrom func.take_info_clubs import take_info_clubs\r\nfrom func.mail import mail_out\r\nfrom func.geoloc import distance_calc\r\nfrom settings import TOKEN\r\nfrom func.keyboards import take_keyboard, Callback_data\r\nimport pymysql\r\nfrom validate_email import validate_email\r\n\r\n# –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞\r\nconnection = pymysql.connect(\r\n    host=\"localhost\",\r\n    user=\"root\",\r\n    password=\"1111\",\r\n    database=\"botDB\"\r\n)\r\nincorrect_input_text = \"–£–ø—Å, –∫–∞–∂–µ—Ç—Å—è —Ç—ã –≤–≤–µ–ª(–∞) —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑\"\r\nalready_registered_text = \", —Ç—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –Ω–∞ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏\"\r\nbot = telebot.TeleBot(TOKEN)\r\n\r\n# –ø—Ä–æ–≤–µ—Ä–∫–∞\r\ndef checkName(name):\r\n    if len(name.split(' ')) == 3 and len(name.split(\" \")[0]) > 1 and len(name.split(\" \")[1]) > 1 and len(name.split(\" \")[2]) > 1:\r\n        return True\r\n    return False\r\n\r\n\r\ndef checkDate(date):\r\n    data = date.split(\".\")\r\n    if len(data) != 3:\r\n        return False\r\n    if data[0].isdigit() and data[1].isdigit() and data[2].isdigit() and int(data[0]) in range(1, 32) and data[1] in [\"01\", \"02\", \"03\", \"04\", \"05\", \"06\", \"07\", \"08\", \"09\", \"10\", \"11\", \"12\"] and \\\r\n            int(data[2]) in range(2004, 2019):\r\n        return True\r\n\r\n'''\r\ndef delete_message(message_id, chat_id):\r\n    return delete_message(chat_id, message_id)\r\n'''\r\n\r\n\r\n\r\n# –æ–±—Ä–∞–±–æ—Ç–∫–∞ callback –æ—Ç –∫–Ω–æ–ø–æ–∫\r\n@bot.callback_query_handler(func=lambda call: True)\r\ndef callback(call):\r\n    if call.data == Callback_data[0]:\r\n        handle_show(call.message, filtering(1)) # —Ñ–∏–ª—å—Ç—Ä —Å–ø–æ—Ä—Ç\r\n    elif call.data == Callback_data[1]:\r\n        handle_show(call.message, filtering(2)) # —Ñ–∏–ª—å—Ç—Ä –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ\r\n    elif call.data == Callback_data[2]:\r\n        handle_show(call.message, filtering(3)) # —Ñ–∏–ª—å—Ç—Ä —Ä–∏—Å–æ–≤–∞–Ω–∏–µ\r\n    elif call.data == Callback_data[3]:\r\n        handle_show(call.message, filtering(4)) # —Ñ–∏–ª—å—Ç—Ä —à–∞—Ö–º–∞—Ç—ã\r\n    elif call.data == Callback_data[4]:\r\n        handle_show(call.message, filtering(5)) # —Ñ–∏–ª—å—Ç—Ä –º—É–∑—ã–∫–∞\r\n    elif call.data == Callback_data[6]: # –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –∫—Ä—É–∂–∫–∏\r\n        with connection.cursor() as cur:\r\n            cur.execute('select * from clubs')\r\n            dt = cur.fetchall()\r\n        handle_show(call.message, dt)\r\n    elif call.data == Callback_data[7]: # —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø—É—Å–∫\r\n        handle_filter(call.message)\r\n    elif call.data == Callback_data[8]: # –≤—ã–≤–æ–¥ –∫—Ä—É–∂–∫–æ–≤\r\n        handle_show(call.message, sorting(1))\r\n    elif call.data == Callback_data[9]: # —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –∫—Ä—É–∂–∫–æ–≤\r\n        with connection.cursor() as cur:\r\n            cur.execute('select * from users where tId = {}'.format(str(call.message.chat.id)))\r\n            dt = cur.fetchall()\r\n        handle_show(call.message, sorting([dt[0][11], dt[0][12]]))\r\n    elif call.data == Callback_data[10]: # —Ñ–∏–ª—å—Ç—Ä —Ç–∏–ø–æ–≤\r\n        handle_filter_types(call.message)\r\n    elif call.data == Callback_data[13]: # –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è–º\r\n        handle_sent_mail(call.message)\r\n    elif call.data == Callback_data[14]: # –Ω–∞–∑–∞–¥ –≤ –º–µ–Ω—é\r\n        with connection.cursor() as cur:\r\n            cur.execute(f'update users set parent_phone = null where tID = ({call.message.chat.id})')\r\n            connection.commit()\r\n        handle_menu(call.message)\r\n    elif call.data == Callback_data[15]: # –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å\r\n        handle_show_profile(call.message)\r\n    elif call.data == Callback_data[16]: # —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å\r\n        handle_edit_profile(call.message)\r\n    elif call.data == Callback_data[17]: # —Ñ–∏–ª—å—Ç—Ä –ø–æ —É–≤–ª–µ—á–µ–Ω–∏—è–º\r\n        handle_show(call.message, sorting(call.message.chat.id))\r\n\r\n\r\n# —Ñ—É–Ω–∫—Ü–∏–∏\r\n@bot.message_handler(commands=['menu'])\r\n\r\ndef handle_menu(message):\r\n    tID = message.chat.id\r\n    with connection.cursor() as cur:\r\n        cur.execute('select kid_firstname, kid_lastname from users where tID = {}'.format(message.chat.id))\r\n        name = cur.fetchall()\r\n    if name:\r\n        bot.send_message(message.chat.id, text=('–ß–µ–º –∑–∞–π–º—ë–º—Å—è –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑, ' + str(name[0][1]) + '?'), reply_markup=take_keyboard('0'))\r\n    else:\r\n        bot.send_message(tID, \"–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –≤ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏, –Ω–∞–ø–∏—à–∏ /start\")\r\n\r\n\r\n# –≤—ã–≤–æ–¥ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\r\n@bot.message_handler(commands=['info'])\r\ndef handle_info(message, num):\r\n    data = take_info_clubs(message.chat.id, int(num))\r\n    info = data[0]\r\n    bot.send_location(message.chat.id, data[1][1], data[1][0])\r\n    bot.send_message(message.chat.id, info, reply_markup=take_keyboard('o1'))\r\n\r\n\r\ndef handle_show(message, data):\r\n    bot.send_message(message.chat.id, text=take_base_clubs(data))\r\n    bot.send_message(message.chat.id, text='–ù–∞–ø–∏—à–∏ –Ω–æ–º–µ—Ä –∫—Ä—É–∂–∫–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è')\r\n\r\n\r\n# –∑–∞–ø–∏—Å—å\r\n@bot.message_handler(commands=['sent_mail'])\r\ndef handle_sent_mail(message):\r\n    with connection.cursor() as cur:\r\n        cur.execute('select parent_email, parent_lastname, parent_patronymic, kid_lastname, kid_firstname, parent_phone, '\r\n                    'posX, posY from users where tID = {}'.format(message.chat.id))\r\n        mail_data = cur.fetchall()\r\n    with connection.cursor() as cur:\r\n        cur.execute('select * from clubs')\r\n        data = cur.fetchall()\r\n    try:\r\n        data = data[int(mail_data[0][5]) - 1]\r\n        bot.send_message(message.chat.id, text='–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ç–æ–±–æ–π –∫—Ä—É–∂–∫–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—é. –£–¥–∞—á–∏ –Ω–∞ –∑–∞–Ω—è—Ç–∏—è—Ö!')\r\n        mail_out(mail_data[0][0], mail_data[0][1], mail_data[0][2], mail_data[0][4], mail_data[0][3], data[0],\r\n                data[1], distance_calc(mail_data[0][6], mail_data[0][7], data[2], data[3]))\r\n        handle_menu(message)\r\n    except Exception:\r\n        print('–ù–µ —É–¥–∞–ª–æ—Å—å')\r\n\r\n# —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è\r\n@bot.message_handler(commands=['filter_types'])\r\ndef handle_filter_types(message):\r\n    bot.send_message(message.chat.id, text='–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä—É–∂–∫–∞', reply_markup=take_keyboard('f1'))\r\n\r\n\r\n@bot.message_handler(commands=['filter'])\r\ndef handle_filter(message):\r\n    with connection.cursor() as cur:\r\n        cur.execute(f'select categories from users where tId = \"{message.chat.id}\"')\r\n        data = cur.fetchall()\r\n    print(data[0][0])\r\n    if data[0][0] != None:\r\n        bot.send_message(message.chat.id, '–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã', reply_markup=take_keyboard('f2'))\r\n    else:\r\n        bot.send_message(message.chat.id, '–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã', reply_markup=take_keyboard('f3'))\r\n\r\n\r\ndef sorting(tag):\r\n    with connection.cursor() as cur:\r\n        cur.execute('select * from clubs')\r\n        data = list(cur.fetchall())\r\n    if tag == 1:\r\n        data = sorted(data, key=lambda x: x[tag])\r\n    elif type(tag) == int:\r\n        with connection.cursor() as cur:\r\n            cur.execute(f'select * from users where tID = {tag}')\r\n            db_info = cur.fetchall()\r\n        try:\r\n            intrests = list(db_info[0][13])\r\n        except Exception:\r\n            pass\r\n        for i in range(len(data)):\r\n            if data[i][5] not in intrests:\r\n                t = data[i]\r\n                del data[i]\r\n                data.append(t)\r\n    else:\r\n        data = sorted(data, key=lambda x: distance_calc(x[2], x[3], tag[0], tag[1]))\r\n    return data\r\n\r\n\r\ndef filtering(num):\r\n    with connection.cursor() as cur:\r\n        cur.execute(f'select * from clubs where category = {str(num)}')\r\n        data = cur.fetchall()\r\n    return data\r\n\r\n\r\n# —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç\r\n@bot.message_handler(commands=['start'])\r\ndef handle_start(message):\r\n    tID = message.chat.id\r\n    with connection.cursor() as cursor:\r\n        cursor.execute(\"select kid_firstname, kid_lastname from users where tID = \\\"\" + str(tID) + \"\\\"\")\r\n        data = cursor.fetchall()\r\n    if not data:\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"insert into users (tID) VALUES (\\\"\" + str(tID) + \"\\\")\")\r\n            connection.commit()\r\n        bot.send_message(tID, \"–ü—Ä–∏–≤–µ—Ç! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ì–æ—Å—É—Å–ª—É–≥–∏ –î–µ—Ç–∏! \"\r\n                              \"–ó–¥–µ—Å—å —Ç—ã —Å–º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ –∫—Ä—É–∂–æ–∫ –∏–ª–∏ —Å–µ–∫—Ü–∏—é –ø–æ —Å–≤–æ–∏–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º\")\r\n        bot.send_message(\r\n            tID, \"–ß—Ç–æ–±—ã —è –ø–æ–º–æ–≥ —Ç–µ–±–µ, –º–Ω–µ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å –Ω–µ–º–Ω–æ–≥–æ –∏–Ω—Ñ—Ä–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–±–µ\")\r\n        msg = bot.send_message(\r\n            tID, \"–ù–∞–ø–∏—à–∏ —Å–≤–æ—é —Ñ–∞–º–∏–ª–∏—é, –∏–º—è –∏ –æ—Ç—á–µ—Å—Ç–≤–æ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª\")\r\n        bot.register_next_step_handler(msg, input_name)\r\n    else:\r\n        bot.send_message(tID, str(data[0][1]) + \", —Ç—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –Ω–∞ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏. –ü–µ—Ä–µ–π–¥–∏ –≤ –º–µ–Ω—é!\",\r\n                         reply_markup=take_keyboard('m1'))\r\n\r\n\r\ndef input_name(message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if not checkName(data):\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, input_name)\r\n    else:\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set kid_firstname = \\\"\" +\r\n                           data.split(\" \")[0] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            cursor.execute(\"update users set kid_lastname = \\\"\" +\r\n                           data.split(\" \")[1] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            cursor.execute(\"update users set kid_patronymic = \\\"\" +\r\n                           data.split(\" \")[2] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n\r\n        bot.send_message(\r\n            tID, \"–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, \" + data.split(\" \")[1])\r\n        msg = bot.send_message(\r\n            tID, \"–û—Ç–ø—Ä–∞–≤—å –º–Ω–µ —Å–≤–æ—é –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì\")\r\n        bot.register_next_step_handler(msg, input_date_birth)\r\n\r\n\r\ndef input_date_birth(message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if checkDate(data):\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set birth_date = \\\"\" +\r\n                           data + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        bot.send_message(tID, \"–ó–∞–ø–∏—Å–∞–ª –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è\")\r\n        msg = bot.send_message(\r\n            tID, \"–ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ü–§–î–û, –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ –µ–≥–æ –Ω–æ–º–µ—Ä. –ï—Å–ª–∏ –Ω–µ—Ç, –æ—Ç–ø—Ä–∞–≤—å 0\")\r\n        bot.register_next_step_handler(msg, input_pfdo)\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, input_date_birth)\r\n\r\n\r\ndef input_pfdo(message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if data == \"0\":\r\n        bot.send_message(tID, \"–ü–æ–Ω—è–ª, —Å—Ç–∞–≤–ª—é –ø—Ä–æ—á–µ—Ä–∫\")\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set cert_number = \\\"\" +\r\n                           \"0\" + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        msg = bot.send_message(\r\n            tID, \"–¢–µ–ø–µ—Ä—å –≤–≤–µ–¥–∏ —Ñ–∞–º–∏–ª–∏—é, –∏–º—è –∏ –æ—Ç—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≥–æ –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª–µ–π\")\r\n        bot.register_next_step_handler(msg, input_parent_name)\r\n    elif data.isdigit():\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set cert_number = \\\"\" +\r\n                           data + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        bot.send_message(\r\n            tID, \"–•–æ—Ä–æ—à–æ, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ü–§–î–û, –æ–Ω –ø–æ–∑–≤–æ–ª–∏—Ç –æ–±—É—á–∞—Ç—å—Å—è –≤ –±–æ–ª—å—à–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–µ–∫—Ü–∏–π\")\r\n        msg = bot.send_message(\r\n            tID, \"–ù–∞–ø–∏—à–∏ —Ñ–∞–º–∏–ª–∏—é, –∏–º—è –∏ –æ—Ç—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≥–æ –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª\")\r\n        bot.register_next_step_handler(msg, input_parent_name)\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, input_pfdo)\r\n\r\n\r\ndef input_parent_name(message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if not checkName(data):\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, input_parent_name)\r\n    else:\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set parent_firstname = \\\"\" +\r\n                           data.split(\" \")[0] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            cursor.execute(\"update users set parent_lastname = \\\"\" +\r\n                           data.split(\" \")[1] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            cursor.execute(\"update users set parent_patronymic = \\\"\" +\r\n                           data.split(\" \")[2] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        msg = bot.send_message(\r\n            tID, \"–û—Ç–ø—Ä–∞–≤—å —Ä–∞–±–æ—á—É—é —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É—é –ø–æ—á—Ç—É —Ä–æ–¥–∏—Ç–µ–ª—è\")\r\n        bot.register_next_step_handler(msg, input_email)\r\n\r\n\r\ndef input_email(message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if validate_email(data, check_mx=True):\r\n        with connection.cursor() as cursor:\r\n                cursor.execute(\"update users set parent_email = \\\"\" +\r\n                               data + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n                connection.commit()\r\n        msg = bot.send_message(\r\n            tID, \"–û—Ç–ø—Ä–∞–≤—å –º–Ω–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ –¥–æ–º–∞, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –∫—Ä—É–∂–∫–∏ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏\")\r\n        bot.register_next_step_handler(msg, get_location)\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, input_email)\r\n\r\n@bot.message_handler(content_types=[\"location\"])\r\ndef get_location(message):\r\n    # –î–û–ë–ê–í–ò–¢–¨ –í –ë–ê–ó–£ –î–ê–ù–ù–´–•\r\n    tID = message.chat.id\r\n    data= str(message.location)\r\n    posX = data[14:23]\r\n    posY = data[37:45]\r\n    posX, posY = posX.strip(\",\"), posY.strip(\",\")\r\n    with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set posX = \\\"\" +\r\n                           str(posX) + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            cursor.execute(\"update users set posY = \\\"\" +\r\n                           str(posY) + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n    bot.send_message(tID, \"–£–∂–µ –ø–æ–¥–±–∏—Ä–∞—é —Ç–µ–±–µ –∫—Ä—É–∂–∫–∏ –æ–∫–æ–ª–æ —Ç–≤–æ–µ–≥–æ –¥–æ–º–∞...\")\r\n    with connection.cursor() as cursor:\r\n        cursor.execute(\"select kid_firstname, kid_lastname from users where tID = \\\"\" + str(tID) + \"\\\"\")\r\n        data = cursor.fetchall()\r\n    bot.send_message(\r\n        tID, \"–£—Ä–∞! \" + str(data[0][1]) + \", —É —Ç–µ–±—è –ø–æ–ª—É—á–∏–ª–æ—Å—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è!\\n–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏—Å–∫–∞—Ç—å –∫—Ä—É–∂–∫–∏, –º–Ω–µ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å, —á–µ–º —Ç—ã —É–≤–ª–µ–∫–∞–µ—à—å—Å—è\\n–ù–∞–ø–∏—à–∏ /quiz\")\r\n\r\n@bot.message_handler(commands=['quiz'])\r\ndef start_quiz(message):\r\n    tID = message.chat.id\r\n    with connection.cursor() as cursor:\r\n        cursor.execute(\"select kid_firstname, kid_lastname, categories from users where tID = \\\"\" + str(tID) + \"\\\"\")\r\n        data = cursor.fetchall()\r\n    try:\r\n        if not data[0][2]:\r\n            bot.send_message(tID, \"–î–∞–≤–∞–π —É–∑–Ω–∞–µ–º –æ —Ç–≤–æ–∏—Ö —É–≤–ª–µ—á–µ–Ω–∏—è—Ö. –û—Ç–≤–µ—á–∞–π \\\"–¥–∞\\\" –∏–ª–∏ \\\"–Ω–µ—Ç\\\"\")\r\n            msg = bot.send_message(tID, \"–õ—é–±–∏—à—å –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–ø–æ—Ä—Ç–æ–º?\")\r\n            bot.register_next_step_handler(msg, pick_sport)\r\n        elif data[0][2]:\r\n            bot.send_message(tID, data[0][1] + \", —Ç—ã —É–∂–µ –æ—Ç–≤–µ—Ç–∏–ª(–∞) –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞–ø–∏—à–∏ /menu\")\r\n    except Exception:\r\n        bot.send_message(tID, \"–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ì–æ—Å–£—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏, –Ω–∞–ø–∏—à–∏ /start\")\r\n\r\ndef pick_sport(message):\r\n    tID = message.chat.id\r\n    answer = message.text\r\n    if answer.lower() == \"–¥–∞\":\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set categories = \\\"\" +\r\n                           \"1\" + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n            msg = bot.send_message(tID, \"–ö–∞–∫ –Ω–∞—Å—á—ë—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π IT?\")\r\n            bot.register_next_step_handler(msg, pick_it)\r\n    elif answer.lower() == \"–Ω–µ—Ç\":\r\n        msg = bot.send_message(tID, \"–ö–∞–∫ –Ω–∞—Å—á—ë—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π IT?\")\r\n        bot.register_next_step_handler(msg, pick_it)\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, pick_sport)\r\n\r\ndef pick_it(message):\r\n    tID = message.chat.id\r\n    answer = message.text\r\n    if answer.lower() == \"–¥–∞\":\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set categories = CONCAT(categories, \\\"\" +\r\n                           \"2\" + \"\\\") where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        msg = bot.send_message(tID, \"–£–≤–ª–µ–∫–∞–µ—à—å—Å—è —Ä–∏—Å–æ–≤–∞–Ω–∏–µ–º?\")\r\n        bot.register_next_step_handler(msg, pick_painting)\r\n    elif answer.lower() == \"–Ω–µ—Ç\":\r\n        msg = bot.send_message(tID, \"–£–≤–ª–µ–∫–∞–µ—à—å—Å—è —Ä–∏—Å–æ–≤–∞–Ω–∏–µ–º?\")\r\n        bot.register_next_step_handler(msg, pick_painting)\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, pick_it)\r\n\r\n\r\ndef pick_painting(message):\r\n    tID = message.chat.id\r\n    answer = message.text\r\n    if answer.lower() == \"–¥–∞\":\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set categories = CONCAT(categories,\\\"\" +\r\n                           \"3\" + \"\\\") where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        msg = bot.send_message(tID, \"–£–≤–ª–µ–∫–∞–µ—à—å—Å—è —à–∞—Ö–º–∞—Ç–∞–º–∏?\")\r\n        bot.register_next_step_handler(msg, pick_chess)\r\n    elif answer.lower() == \"–Ω–µ—Ç\":\r\n        msg = bot.send_message(tID, \"–£–≤–ª–µ–∫–∞–µ—à—å—Å—è —à–∞—Ö–º–∞—Ç–∞–º–∏?\")\r\n        bot.register_next_step_handler(msg, pick_chess)\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, pick_painting)\r\n\r\ndef pick_chess(message):\r\n    tID = message.chat.id\r\n    answer = message.text\r\n    if answer.lower() == \"–¥–∞\":\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set categories = CONCAT(categories,\\\"\" +\r\n                           \"4\" + \"\\\") where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        msg = bot.send_message(tID, \"–ú–æ–∂–µ—Ç –ª—é–±–∏—à—å –ø–æ–∏–≥—Ä–∞—Ç—å –Ω–∞ –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö?\")\r\n        bot.register_next_step_handler(msg, pick_music)\r\n    elif answer.lower() == \"–Ω–µ—Ç\":\r\n        msg = bot.send_message(tID, \"–ú–æ–∂–µ—Ç –ª—é–±–∏—à—å –ø–æ–∏–≥—Ä–∞—Ç—å –Ω–∞ –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö?\")\r\n        bot.register_next_step_handler(msg, pick_music)\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, pick_chess)\r\n\r\ndef pick_music(message):\r\n    tID = message.chat.id\r\n    answer = message.text\r\n    if answer.lower() == \"–¥–∞\":\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set categories = CONCAT(categories,\\\"\" +\r\n                           \"4\" + \"\\\") where tID = \\\"\" + str(tID) + \"\\\"\")\r\n        connection.commit()\r\n        msg = bot.send_message(tID, \"–û—Ç–ª–∏—á–Ω–æ, —è –∑–∞–ø–æ–º–Ω–∏–ª –≤—Å–µ —Ç–≤–æ–∏ —É–≤–ª–µ—á–µ–Ω–∏—è! –ù–∞—á–∏–Ω–∞–π –≤—ã–±–∏—Ä–∞—Ç—å, –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ /menu\")\r\n    elif answer.lower() == \"–Ω–µ—Ç\":\r\n        msg = bot.send_message(tID, \"–û—Ç–ª–∏—á–Ω–æ, —è –∑–∞–ø–æ–º–Ω–∏–ª –≤—Å–µ —Ç–≤–æ–∏ —É–≤–ª–µ—á–µ–Ω–∏—è! –ù–∞—á–∏–Ω–∞–π –≤—ã–±–∏—Ä–∞—Ç—å, –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ /menu\")\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, pick_music)\r\n\r\n\r\n# –ø—Ä–æ—Ñ–∏–ª—å\r\n@bot.message_handler(commands=['showprofile'])\r\ndef handle_show_profile(message):\r\n    tID = message.chat.id\r\n\r\n    with connection.cursor() as cursor:\r\n        cursor.execute(\"select * from users where tID = \\\"\" + str(tID) + \"\\\"\")\r\n        data = cursor.fetchall()\r\n        if data:\r\n            bot.send_message(tID, \"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è:\")\r\n            dict = {\"1\": \", –°–ø–æ—Ä—Ç\", \"2\": \", –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ IT\", \"3\": \", –†–∏—Å–æ–≤–∞–Ω–∏–µ\", \"4\": \", –®–∞—Ö–º–∞—Ç—ã\", \"5\": \", –ú—É–∑—ã–∫–∞\"}\r\n            cat = \"\"\r\n            try:\r\n                for a in data[0][13]:\r\n                    cat = cat + dict[a]\r\n            except Exception:\r\n                pass\r\n            info_pro = \"–¢–≤–æ—ë –§–ò–û: \" + str(data[0][0]) + \" \" + str(data[0][1]) + \" \" + data[0][2] + \"\\n\" + \\\r\n            \"–¢–≤–æ—è –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: \" + data[0][10] + \"\\n\" + \\\r\n            \"–ù–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –ü–§–î–û: \" + data[0][9] + \"\\n\" + \\\r\n            \"–§–ò–û –†–æ–¥–∏—Ç–µ–ª—è: \" + str(data[0][3]) + \" \" + str(data[0][4]) + \" \" + data[0][5] + \"\\n\" + \\\r\n            \"–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞: \" + data[0][8] + \"\\n\" + \\\r\n            \"–¢–≤–æ–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã: \" + cat[2:] + \\\r\n            \"\\n–î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–ø–∏—à–∏ /editprofile\"\r\n            bot.send_message(message.chat.id, text=info_pro)\r\n        else:\r\n            bot.send_message(tID, \"–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –≤ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏, –Ω–∞–ø–∏—à–∏ /start\")\r\n\r\n@bot.message_handler(commands=['editprofile'])\r\ndef handle_edit_profile(message):\r\n    tID = message.chat.id\r\n    with connection.cursor() as cursor:\r\n        cursor.execute(\"select * from users where tID = \\\"\" + str(tID) + \"\\\"\")\r\n        data = cursor.fetchall()\r\n    if data:\r\n        bot.send_message(tID, \"–î–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è:\")\r\n        dict = {\"1\":\", –°–ø–æ—Ä—Ç\", \"2\":\", –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ IT\",\"3\":\", –†–∏—Å–æ–≤–∞–Ω–∏–µ\",\"4\":\", –®–∞—Ö–º–∞—Ç—ã\",\"5\":\", –ú—É–∑—ã–∫–∞\"}\r\n        cat = \"\"\r\n        try:\r\n            for a in data[0][13]:\r\n                cat = cat + dict[a]\r\n        except Exception:\r\n            pass\r\n        info = \"1. –¢–≤–æ—ë –§–ò–û: \" + str(data[0][0]) + \" \" + str(data[0][1]) + \" \" + data[0][2] + \"\\n\" + \\\r\n            \"2. –¢–≤–æ—è –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: \" + data[0][10] + \"\\n\" + \\\r\n            \"3. –ù–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –ü–§–î–û: \" + data[0][9] + \"\\n\" + \\\r\n            \"4. –§–ò–û –†–æ–¥–∏—Ç–µ–ª—è: \" + str(data[0][3]) + \" \" + str(data[0][4]) + \" \" + data[0][5] + \"\\n\" + \\\r\n            \"5. –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞: \" + data[0][8] + \"\\n\" + \\\r\n            \"6. –¢–≤–æ–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã: \" + cat[2:] + '\\n' + \\\r\n            '7. –ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ'\r\n        bot.send_message(tID, info)\r\n        msg = bot.send_message(tID, \"–í—ã–±–µ—Ä–∏ –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—á–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å\")\r\n        bot.register_next_step_handler(msg, pick_line)\r\n    else:\r\n        bot.send_message(tID, \"–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –≤ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏, –Ω–∞–ø–∏—à–∏ /start\")\r\n\r\n\r\ndef pick_line(message):\r\n    tID = message.chat.id\r\n    num = message.text\r\n    if num.isdigit() and len(num) == 1 and int(num) in range(1,8):\r\n        num = int(num)\r\n        if num == 1:\r\n            msg = bot.send_message(tID, \"–í–≤–µ–¥–∏ —Å–≤–æ—é —Ñ–∞–º–∏–ª–∏—é, –∏–º—è –∏ –æ—Ç—á–µ—Å—Ç–≤–æ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª\")\r\n            bot.register_next_step_handler(msg, commit_kid_name)\r\n        elif num == 2:\r\n            msg = bot.send_message(tID, \"–í–≤–µ–¥–∏ —Å–≤–æ—é –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì\")\r\n            bot.register_next_step_handler(msg, commit_birth_date)\r\n        elif num == 3:\r\n            msg = bot.send_message(tID, \"–í–≤–µ–¥–∏ –Ω–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –ü–§–î–û, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, –≤–≤–µ–¥–∏ 0\")\r\n            bot.register_next_step_handler(msg, commit_pfdo_num)\r\n\r\n        elif num == 4:\r\n            msg = bot.send_message(tID, \"–í–≤–µ–¥–∏ —Ñ–∞–º–∏–ª–∏—é, –∏–º—è –∏ –æ—Ç—á–µ—Å—Ç–≤–æ —Ä–æ–¥–∏—Ç–µ–ª—è —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª\")\r\n            bot.register_next_step_handler(msg, commit_parent_name)\r\n\r\n        elif num == 5:\r\n            msg = bot.send_message(tID, \"–í–≤–µ–¥–∏ –¥–µ–π—Å—Ç–≤—É—é—â—É—é —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É—é –ø–æ—á—Ç—É —Ä–æ–¥–∏—Ç–µ–ª—è\")\r\n            bot.register_next_step_handler(msg, commit_parent_email)\r\n\r\n        elif num == 6:\r\n            msg = bot.send_message(tID, \"–í–≤–µ–¥–∏ —Ü–∏—Ñ—Ä—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, 124\\n1. –°–ø–æ—Ä—Ç\\n2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ IT\\n3. –†–∏—Å–æ–≤–∞–Ω–∏–µ\\n4. –®–∞—Ö–º–∞—Ç—ã\\n5. –ú—É–∑—ã–∫–∞\")\r\n            bot.register_next_step_handler(msg, commit_categories)\r\n\r\n        elif num == 7:\r\n            msg = bot.send_message(tID, \"–û—Ç–ø—Ä–∞–≤—å —Å–≤–æ—ë –Ω–æ–≤–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ\")\r\n            bot.register_next_step_handler(msg, commit_location)\r\n        else:\r\n            msg = bot.send_message(tID, incorrect_input_text)\r\n            bot.register_next_step_handler(msg, pick_line)\r\n\r\n\r\ndef commit_kid_name(message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if not checkName(data):\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, commit_kid_name)\r\n    else:\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set kid_firstname = \\\"\" +\r\n                           data.split(\" \")[0] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            cursor.execute(\"update users set kid_lastname = \\\"\" +\r\n                           data.split(\" \")[1] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            cursor.execute(\"update users set kid_patronymic = \\\"\" +\r\n                           data.split(\" \")[2] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n\r\n        bot.send_message(\r\n            tID, \"–¢–≤–æ—ë –§–ò–û —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ\")\r\n    handle_menu(message)\r\n\r\n\r\ndef commit_birth_date(message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if checkDate(data):\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set birth_date = \\\"\" +\r\n                           data + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        bot.send_message(tID, \"–¢–≤–æ—è –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞\")\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, commit_birth_date)\r\n    handle_menu(message)\r\n\r\n\r\ndef commit_pfdo_num(message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if data == \"0\":\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set cert_number = \\\"\" +\r\n                           \"0\" + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        bot.send_message(tID, \"–¢–≤–æ–π –Ω–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –ü–§–î–û –æ–±–Ω–æ–≤–ª—ë–Ω\")\r\n    elif data.isdigit():\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set cert_number = \\\"\" +\r\n                           data + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        bot.send_message(tID, \"–¢–≤–æ–π –Ω–æ–º–µ—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –ü–§–î–û –æ–±–Ω–æ–≤–ª—ë–Ω\")\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, commit_pfdo_num)\r\n    handle_menu(message)\r\n\r\n\r\ndef commit_parent_name(message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if not checkName(data):\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, commit_parent_name)\r\n    else:\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set parent_firstname = \\\"\" +\r\n                           data.split(\" \")[0] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            cursor.execute(\"update users set parent_lastname = \\\"\" +\r\n                           data.split(\" \")[1] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            cursor.execute(\"update users set parent_patronymic = \\\"\" +\r\n                           data.split(\" \")[2] + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        bot.send_message(tID, \"–§–ò–û —Ç–≤–æ–µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–æ\")\r\n\r\n\r\ndef commit_parent_email (message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if validate_email(data, check_mx=True):\r\n        with connection.cursor() as cursor:\r\n                cursor.execute(\"update users set parent_email = \\\"\" +\r\n                               data + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n                connection.commit()\r\n        bot.send_message(tID, \"–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ —Ç–≤–æ–µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞\")\r\n    else:\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, commit_parent_email)\r\n    # –ü–†–û–í–ï–†–ö–ê –ü–û–ß–¢–´\r\n    handle_menu(message)\r\n\r\n\r\ndef commit_categories(message):\r\n    tID = message.chat.id\r\n    data = message.text\r\n    if not data.isdigit():\r\n        msg = bot.send_message(tID, incorrect_input_text)\r\n        bot.register_next_step_handler(msg, commit_categories)\r\n    else:\r\n        with connection.cursor() as cursor:\r\n            cursor.execute(\"update users set categories = \\\"\" +\r\n                            data + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n            connection.commit()\r\n        bot.send_message(tID, \"–¢–≤–æ–π —Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –æ–±–Ω–æ–≤–ª—ë–Ω\")\r\n        handle_menu(message)\r\n@bot.message_handler(content_types=['location'])\r\ndef commit_location(message):\r\n    tID = message.chat.id\r\n    data = str(message.location)\r\n    posX = data[14:23]\r\n    posY = data[37:45]\r\n    with connection.cursor() as cursor:\r\n        cursor.execute(\"update users set posX = \\\"\" +\r\n                       str(posX) + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n        cursor.execute(\"update users set posY = \\\"\" +\r\n                       str(posY) + \"\\\" where tID = \\\"\" + str(tID) + \"\\\"\")\r\n        connection.commit()\r\n    bot.send_message(tID, \"–¢–≤–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ\")\r\n\r\n\r\n# –∫–æ–Ω—Ç—Ä–æ–ª—å –≤–≤–æ–¥–∞\r\n@bot.message_handler(func=lambda text:True)\r\ndef text_check(message):\r\n    with connection.cursor() as cur:\r\n        cur.execute('select * from clubs')\r\n        db = cur.fetchall()\r\n    try:\r\n        if 0 < int(message.text) <= len(db):\r\n            handle_info(message, int(message.text))\r\n    except Exception as e:\r\n        print(e)\r\n\r\n\r\nbot.polling()
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/main.py b/main.py
--- a/main.py	(revision 8d99d49199e72bf1106061817c84aa203edd9f52)
+++ b/main.py	(date 1633170666296)
@@ -17,7 +17,7 @@
     database="botDB"
 )
 incorrect_input_text = "–£–ø—Å, –∫–∞–∂–µ—Ç—Å—è —Ç—ã –≤–≤–µ–ª(–∞) —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑"
-already_registered_text = ", —Ç—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –Ω–∞ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏"
+already_registered_text = ", —Ç—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –Ω–∞ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏‚úÖ"
 bot = telebot.TeleBot(TOKEN)
 
 # –ø—Ä–æ–≤–µ—Ä–∫–∞
@@ -97,7 +97,7 @@
     if name:
         bot.send_message(message.chat.id, text=('–ß–µ–º –∑–∞–π–º—ë–º—Å—è –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑, ' + str(name[0][1]) + '?'), reply_markup=take_keyboard('0'))
     else:
-        bot.send_message(tID, "–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –≤ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏, –Ω–∞–ø–∏—à–∏ /start")
+        bot.send_message(tID, "–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –≤ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏üòî\n–ù–∞–ø–∏—à–∏ /start")
 
 
 # –≤—ã–≤–æ–¥ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
@@ -130,8 +130,8 @@
         mail_out(mail_data[0][0], mail_data[0][1], mail_data[0][2], mail_data[0][4], mail_data[0][3], data[0],
                 data[1], distance_calc(mail_data[0][6], mail_data[0][7], data[2], data[3]))
         handle_menu(message)
-    except Exception:
-        print('–ù–µ —É–¥–∞–ª–æ—Å—å')
+    except Exception as e:
+        print(e)
 
 # —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
 @bot.message_handler(commands=['filter_types'])
@@ -144,7 +144,7 @@
     with connection.cursor() as cur:
         cur.execute(f'select categories from users where tId = "{message.chat.id}"')
         data = cur.fetchall()
-    print(data[0][0])
+    #print(data[0][0])
     if data[0][0] != None:
         bot.send_message(message.chat.id, '–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã', reply_markup=take_keyboard('f2'))
     else:
@@ -193,15 +193,15 @@
         with connection.cursor() as cursor:
             cursor.execute("insert into users (tID) VALUES (\"" + str(tID) + "\")")
             connection.commit()
-        bot.send_message(tID, "–ü—Ä–∏–≤–µ—Ç! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ì–æ—Å—É—Å–ª—É–≥–∏ –î–µ—Ç–∏! "
-                              "–ó–¥–µ—Å—å —Ç—ã —Å–º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ –∫—Ä—É–∂–æ–∫ –∏–ª–∏ —Å–µ–∫—Ü–∏—é –ø–æ —Å–≤–æ–∏–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º")
+        bot.send_message(tID, "–ü—Ä–∏–≤–µ—Çüëã\n–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ì–æ—Å—É—Å–ª—É–≥–∏ –î–µ—Ç–∏! "
+                              "–ó–¥–µ—Å—å —Ç—ã —Å–º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ –∫—Ä—É–∂–æ–∫ –∏–ª–∏ —Å–µ–∫—Ü–∏—é –ø–æ —Å–≤–æ–∏–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–ºüôã")
         bot.send_message(
             tID, "–ß—Ç–æ–±—ã —è –ø–æ–º–æ–≥ —Ç–µ–±–µ, –º–Ω–µ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å –Ω–µ–º–Ω–æ–≥–æ –∏–Ω—Ñ—Ä–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–±–µ")
         msg = bot.send_message(
             tID, "–ù–∞–ø–∏—à–∏ —Å–≤–æ—é —Ñ–∞–º–∏–ª–∏—é, –∏–º—è –∏ –æ—Ç—á–µ—Å—Ç–≤–æ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª")
         bot.register_next_step_handler(msg, input_name)
     else:
-        bot.send_message(tID, str(data[0][1]) + ", —Ç—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –Ω–∞ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏. –ü–µ—Ä–µ–π–¥–∏ –≤ –º–µ–Ω—é!",
+        bot.send_message(tID, str(data[0][1]) + ", —Ç—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –Ω–∞ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏‚úÖ\n",
                          reply_markup=take_keyboard('m1'))
 
 
@@ -222,7 +222,7 @@
             connection.commit()
 
         bot.send_message(
-            tID, "–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, " + data.split(" ")[1])
+            tID, "–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, " + data.split(" ")[1] +"üôà")
         msg = bot.send_message(
             tID, "–û—Ç–ø—Ä–∞–≤—å –º–Ω–µ —Å–≤–æ—é –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì")
         bot.register_next_step_handler(msg, input_date_birth)
@@ -236,9 +236,8 @@
             cursor.execute("update users set birth_date = \"" +
                            data + "\" where tID = \"" + str(tID) + "\"")
             connection.commit()
-        bot.send_message(tID, "–ó–∞–ø–∏—Å–∞–ª –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è")
         msg = bot.send_message(
-            tID, "–ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ü–§–î–û, –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ –µ–≥–æ –Ω–æ–º–µ—Ä. –ï—Å–ª–∏ –Ω–µ—Ç, –æ—Ç–ø—Ä–∞–≤—å 0")
+            tID, "–ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ü–§–î–û, –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ –µ–≥–æ –Ω–æ–º–µ—Ä\n–ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, –æ—Ç–ø—Ä–∞–≤—å 0")
         bot.register_next_step_handler(msg, input_pfdo)
     else:
         msg = bot.send_message(tID, incorrect_input_text)
@@ -249,7 +248,7 @@
     tID = message.chat.id
     data = message.text
     if data == "0":
-        bot.send_message(tID, "–ü–æ–Ω—è–ª, —Å—Ç–∞–≤–ª—é –ø—Ä–æ—á–µ—Ä–∫")
+        bot.send_message(tID, "–ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å –æ—Ñ–æ—Ä–º–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –ø–µ—Ä–µ—Ö–æ–¥–∏ –ø–æ https://pfdo.ru/\n–¢–∞–º —Ç–µ–±—è –∂–¥—ë—Ç –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
         with connection.cursor() as cursor:
             cursor.execute("update users set cert_number = \"" +
                            "0" + "\" where tID = \"" + str(tID) + "\"")
@@ -320,13 +319,15 @@
                            str(posX) + "\" where tID = \"" + str(tID) + "\"")
             cursor.execute("update users set posY = \"" +
                            str(posY) + "\" where tID = \"" + str(tID) + "\"")
+            cursor.execute("update users set parent_phone = \"" +
+                           str(0) + "\" where tID = \"" + str(tID) + "\"")
             connection.commit()
     bot.send_message(tID, "–£–∂–µ –ø–æ–¥–±–∏—Ä–∞—é —Ç–µ–±–µ –∫—Ä—É–∂–∫–∏ –æ–∫–æ–ª–æ —Ç–≤–æ–µ–≥–æ –¥–æ–º–∞...")
     with connection.cursor() as cursor:
         cursor.execute("select kid_firstname, kid_lastname from users where tID = \"" + str(tID) + "\"")
         data = cursor.fetchall()
     bot.send_message(
-        tID, "–£—Ä–∞! " + str(data[0][1]) + ", —É —Ç–µ–±—è –ø–æ–ª—É—á–∏–ª–æ—Å—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è!\n–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏—Å–∫–∞—Ç—å –∫—Ä—É–∂–∫–∏, –º–Ω–µ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å, —á–µ–º —Ç—ã —É–≤–ª–µ–∫–∞–µ—à—å—Å—è\n–ù–∞–ø–∏—à–∏ /quiz")
+        tID, "–£—Ä–∞! " + str(data[0][1]) + ", —É —Ç–µ–±—è –ø–æ–ª—É—á–∏–ª–æ—Å—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—èüéâ\n–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏—Å–∫–∞—Ç—å –∫—Ä—É–∂–∫–∏, –º–Ω–µ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å, —á–µ–º —Ç—ã —É–≤–ª–µ–∫–∞–µ—à—å—Å—è\n–ù–∞–ø–∏—à–∏ /quiz")
 
 @bot.message_handler(commands=['quiz'])
 def start_quiz(message):
@@ -337,12 +338,12 @@
     try:
         if not data[0][2]:
             bot.send_message(tID, "–î–∞–≤–∞–π —É–∑–Ω–∞–µ–º –æ —Ç–≤–æ–∏—Ö —É–≤–ª–µ—á–µ–Ω–∏—è—Ö. –û—Ç–≤–µ—á–∞–π \"–¥–∞\" –∏–ª–∏ \"–Ω–µ—Ç\"")
-            msg = bot.send_message(tID, "–õ—é–±–∏—à—å –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–ø–æ—Ä—Ç–æ–º?")
+            msg = bot.send_message(tID, "üö¥–õ—é–±–∏—à—å –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–ø–æ—Ä—Ç–æ–º?")
             bot.register_next_step_handler(msg, pick_sport)
         elif data[0][2]:
             bot.send_message(tID, data[0][1] + ", —Ç—ã —É–∂–µ –æ—Ç–≤–µ—Ç–∏–ª(–∞) –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞–ø–∏—à–∏ /menu")
     except Exception:
-        bot.send_message(tID, "–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ì–æ—Å–£—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏, –Ω–∞–ø–∏—à–∏ /start")
+        bot.send_message(tID, "–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –≤ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏üòî\n–ù–∞–ø–∏—à–∏ /start")
 
 def pick_sport(message):
     tID = message.chat.id
@@ -355,6 +356,10 @@
             msg = bot.send_message(tID, "–ö–∞–∫ –Ω–∞—Å—á—ë—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π IT?")
             bot.register_next_step_handler(msg, pick_it)
     elif answer.lower() == "–Ω–µ—Ç":
+        with connection.cursor() as cursor:
+            cursor.execute("update users set categories = \"" +
+                           "" + "\" where tID = \"" + str(tID) + "\"")
+            connection.commit()
         msg = bot.send_message(tID, "–ö–∞–∫ –Ω–∞—Å—á—ë—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π IT?")
         bot.register_next_step_handler(msg, pick_it)
     else:
@@ -419,7 +424,7 @@
     if answer.lower() == "–¥–∞":
         with connection.cursor() as cursor:
             cursor.execute("update users set categories = CONCAT(categories,\"" +
-                           "4" + "\") where tID = \"" + str(tID) + "\"")
+                           "5" + "\") where tID = \"" + str(tID) + "\"")
         connection.commit()
         msg = bot.send_message(tID, "–û—Ç–ª–∏—á–Ω–æ, —è –∑–∞–ø–æ–º–Ω–∏–ª –≤—Å–µ —Ç–≤–æ–∏ —É–≤–ª–µ—á–µ–Ω–∏—è! –ù–∞—á–∏–Ω–∞–π –≤—ã–±–∏—Ä–∞—Ç—å, –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ /menu")
     elif answer.lower() == "–Ω–µ—Ç":
@@ -455,7 +460,7 @@
             "\n–î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–ø–∏—à–∏ /editprofile"
             bot.send_message(message.chat.id, text=info_pro)
         else:
-            bot.send_message(tID, "–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –≤ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏, –Ω–∞–ø–∏—à–∏ /start")
+            bot.send_message(tID, "–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –≤ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏üòî\n–ù–∞–ø–∏—à–∏ /start")
 
 @bot.message_handler(commands=['editprofile'])
 def handle_edit_profile(message):
@@ -483,7 +488,7 @@
         msg = bot.send_message(tID, "–í—ã–±–µ—Ä–∏ –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—á–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å")
         bot.register_next_step_handler(msg, pick_line)
     else:
-        bot.send_message(tID, "–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –≤ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏, –Ω–∞–ø–∏—à–∏ /start")
+        bot.send_message(tID, "–¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω(–∞) –≤ –ì–æ—Å—É—Å–ª—É–≥–∞—Ö –î–µ—Ç–∏üòî\n–ù–∞–ø–∏—à–∏ /start")
 
 
 def pick_line(message):
@@ -649,7 +654,9 @@
     try:
         if 0 < int(message.text) <= len(db):
             handle_info(message, int(message.text))
+            print(message.text, "----")
     except Exception as e:
+        print("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ü–∏—Ñ—Ä—ã –∫—Ä—É–∂–∫–∞")
         print(e)
 
 
Index: func/keyboards.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from telebot import types\r\nCallback_data = ['Sport', 'Programming', 'Drawing', 'Chess', 'Music', 'Apply',\r\n                 'Show_activities', 'Filter', 'Cost', 'Most_close', 'Type',\r\n                 'Yes', 'No', 'Write', 'Back', 'show_profile', 'edit_profile', 'quiz']\r\n\r\n\r\ndef take_keyboard(num):\r\n    if num == 'r1':\r\n        b1 = types.InlineKeyboardButton(text='–î–∞', callback_data=Callback_data[11])\r\n        b2 = types.InlineKeyboardButton(text='–ù–µ—Ç', callback_data=Callback_data[12])\r\n        keyboard = types.InlineKeyboardMarkup([[b1], [b2]])\r\n    elif num == '0':\r\n        b1 = types.InlineKeyboardButton(text='–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–µ–∫—Ü–∏–∏ –∏ –∫—Ä—É–∂–∫–∏', callback_data=Callback_data[6])\r\n        b2 = types.InlineKeyboardButton(text='–í–∫–ª—é—á–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º', callback_data=Callback_data[7])\r\n        b3 = types.InlineKeyboardButton(text='–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è', callback_data=Callback_data[15])\r\n        keyboard = types.InlineKeyboardMarkup([[b1], [b2], [b3]])\r\n    elif num == 'f1':\r\n        b1 = types.InlineKeyboardButton(text='–°–ø–æ—Ä—Ç', callback_data=Callback_data[0])\r\n        b2 = types.InlineKeyboardButton(text='–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ', callback_data=Callback_data[1])\r\n        b3 = types.InlineKeyboardButton(text='–†–∏—Å–æ–≤–∞–Ω–∏–µ', callback_data=Callback_data[2])\r\n        b4 = types.InlineKeyboardButton(text='–®–∞—Ö–º–∞—Ç—ã', callback_data=Callback_data[3])\r\n        b5 = types.InlineKeyboardButton(text='–ú—É–∑—ã–∫–∞', callback_data=Callback_data[4])\r\n        b6 = types.InlineKeyboardButton(text='')\r\n        keyboard = types.InlineKeyboardMarkup([[b1], [b2], [b3], [b4], [b5]])\r\n    elif num == 'f2':\r\n        b1 = types.InlineKeyboardButton(text='–ü–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏', callback_data=Callback_data[8])\r\n        b2 = types.InlineKeyboardButton(text='–ü–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é', callback_data=Callback_data[9])\r\n        b3 = types.InlineKeyboardButton(text='–ü–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º', callback_data=Callback_data[10])\r\n        b4 = types.InlineKeyboardButton(text='–ü–æ —Ç–≤–æ–∏–º —É–≤–ª–µ—á–µ–Ω–∏—è–º', callback_data=Callback_data[17])\r\n        keyboard = types.InlineKeyboardMarkup([[b1], [b2], [b3], [b4]])\r\n    elif num == 'o1':\r\n        b1 = types.InlineKeyboardButton(text='–ó–∞–ø–∏—Å–∞—Ç—å—Å—è', callback_data=Callback_data[13])\r\n        b2 = types.InlineKeyboardButton(text='–ù–∞–∑–∞–¥', callback_data=Callback_data[14])\r\n        keyboard = types.InlineKeyboardMarkup([[b1], [b2]])\r\n    elif num == 'r2':\r\n        b1 = types.InlineKeyboardButton(text='–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è', callback_data=Callback_data[16])\r\n        b2 = types.InlineKeyboardButton(text='–ù–∞–∑–∞–¥', callback_data=Callback_data[14])\r\n        keyboard = types.InlineKeyboardButton([[b1], [b2]])\r\n    elif num == 'f3':\r\n        b1 = types.InlineKeyboardButton(text='–ü–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏', callback_data=Callback_data[8])\r\n        b2 = types.InlineKeyboardButton(text='–ü–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é', callback_data=Callback_data[9])\r\n        b3 = types.InlineKeyboardButton(text='–ü–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º', callback_data=Callback_data[10])\r\n        keyboard = types.InlineKeyboardMarkup([[b1], [b2], [b3]])\r\n    elif num == 'm1':\r\n        b1 = types.InlineKeyboardButton(text='–ú–µ–Ω—é', callback_data=Callback_data[14])\r\n        keyboard = types.InlineKeyboardMarkup([[b1]])\r\n    return keyboard\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/func/keyboards.py b/func/keyboards.py
--- a/func/keyboards.py	(revision 8d99d49199e72bf1106061817c84aa203edd9f52)
+++ b/func/keyboards.py	(date 1633169376433)
@@ -10,31 +10,31 @@
         b2 = types.InlineKeyboardButton(text='–ù–µ—Ç', callback_data=Callback_data[12])
         keyboard = types.InlineKeyboardMarkup([[b1], [b2]])
     elif num == '0':
-        b1 = types.InlineKeyboardButton(text='–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–µ–∫—Ü–∏–∏ –∏ –∫—Ä—É–∂–∫–∏', callback_data=Callback_data[6])
-        b2 = types.InlineKeyboardButton(text='–í–∫–ª—é—á–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º', callback_data=Callback_data[7])
-        b3 = types.InlineKeyboardButton(text='–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è', callback_data=Callback_data[15])
+        b1 = types.InlineKeyboardButton(text='üìÉ–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–µ–∫—Ü–∏–∏ –∏ –∫—Ä—É–∂–∫–∏üìÉ', callback_data=Callback_data[6])
+        b2 = types.InlineKeyboardButton(text='üìÇ–í–∫–ª—é—á–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–ºüìÇ', callback_data=Callback_data[7])
+        b3 = types.InlineKeyboardButton(text='üìù–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—èüìù', callback_data=Callback_data[15])
         keyboard = types.InlineKeyboardMarkup([[b1], [b2], [b3]])
     elif num == 'f1':
-        b1 = types.InlineKeyboardButton(text='–°–ø–æ—Ä—Ç', callback_data=Callback_data[0])
-        b2 = types.InlineKeyboardButton(text='–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ', callback_data=Callback_data[1])
-        b3 = types.InlineKeyboardButton(text='–†–∏—Å–æ–≤–∞–Ω–∏–µ', callback_data=Callback_data[2])
-        b4 = types.InlineKeyboardButton(text='–®–∞—Ö–º–∞—Ç—ã', callback_data=Callback_data[3])
-        b5 = types.InlineKeyboardButton(text='–ú—É–∑—ã–∫–∞', callback_data=Callback_data[4])
+        b1 = types.InlineKeyboardButton(text='–°–ø–æ—Ä—Çüö¥', callback_data=Callback_data[0])
+        b2 = types.InlineKeyboardButton(text='–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µüíª', callback_data=Callback_data[1])
+        b3 = types.InlineKeyboardButton(text='–†–∏—Å–æ–≤–∞–Ω–∏–µüåÜ', callback_data=Callback_data[2])
+        b4 = types.InlineKeyboardButton(text='–®–∞—Ö–º–∞—Ç—ãüé≤', callback_data=Callback_data[3])
+        b5 = types.InlineKeyboardButton(text='–ú—É–∑—ã–∫–∞üé∂', callback_data=Callback_data[4])
         b6 = types.InlineKeyboardButton(text='')
         keyboard = types.InlineKeyboardMarkup([[b1], [b2], [b3], [b4], [b5]])
     elif num == 'f2':
-        b1 = types.InlineKeyboardButton(text='–ü–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏', callback_data=Callback_data[8])
-        b2 = types.InlineKeyboardButton(text='–ü–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é', callback_data=Callback_data[9])
-        b3 = types.InlineKeyboardButton(text='–ü–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º', callback_data=Callback_data[10])
-        b4 = types.InlineKeyboardButton(text='–ü–æ —Ç–≤–æ–∏–º —É–≤–ª–µ—á–µ–Ω–∏—è–º', callback_data=Callback_data[17])
+        b1 = types.InlineKeyboardButton(text='–ü–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏üí≤', callback_data=Callback_data[8])
+        b2 = types.InlineKeyboardButton(text='–ü–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—éüöÇ', callback_data=Callback_data[9])
+        b3 = types.InlineKeyboardButton(text='–ü–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–ºüë¶', callback_data=Callback_data[10])
+        b4 = types.InlineKeyboardButton(text='–ü–æ —Ç–≤–æ–∏–º —É–≤–ª–µ—á–µ–Ω–∏—è–ºüìå', callback_data=Callback_data[17])
         keyboard = types.InlineKeyboardMarkup([[b1], [b2], [b3], [b4]])
     elif num == 'o1':
-        b1 = types.InlineKeyboardButton(text='–ó–∞–ø–∏—Å–∞—Ç—å—Å—è', callback_data=Callback_data[13])
-        b2 = types.InlineKeyboardButton(text='–ù–∞–∑–∞–¥', callback_data=Callback_data[14])
+        b1 = types.InlineKeyboardButton(text='–ó–∞–ø–∏—Å–∞—Ç—å—Å—è‚úÖ', callback_data=Callback_data[13])
+        b2 = types.InlineKeyboardButton(text='–ù–∞–∑–∞–¥‚¨Ö', callback_data=Callback_data[14])
         keyboard = types.InlineKeyboardMarkup([[b1], [b2]])
     elif num == 'r2':
-        b1 = types.InlineKeyboardButton(text='–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è', callback_data=Callback_data[16])
-        b2 = types.InlineKeyboardButton(text='–ù–∞–∑–∞–¥', callback_data=Callback_data[14])
+        b1 = types.InlineKeyboardButton(text='–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è‚úè', callback_data=Callback_data[16])
+        b2 = types.InlineKeyboardButton(text='–ù–∞–∑–∞–¥‚¨Ö', callback_data=Callback_data[14])
         keyboard = types.InlineKeyboardButton([[b1], [b2]])
     elif num == 'f3':
         b1 = types.InlineKeyboardButton(text='–ü–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏', callback_data=Callback_data[8])
@@ -42,6 +42,6 @@
         b3 = types.InlineKeyboardButton(text='–ü–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º', callback_data=Callback_data[10])
         keyboard = types.InlineKeyboardMarkup([[b1], [b2], [b3]])
     elif num == 'm1':
-        b1 = types.InlineKeyboardButton(text='–ú–µ–Ω—é', callback_data=Callback_data[14])
+        b1 = types.InlineKeyboardButton(text='–ú–µ–Ω—éüí¨', callback_data=Callback_data[14])
         keyboard = types.InlineKeyboardMarkup([[b1]])
     return keyboard
Index: func/geoloc.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from geopy import distance\r\n\r\n\r\ndef distance_calc(myshirota, mydolgota, clubshirota, clubdolgota):\r\n    mylocation = (myshirota, mydolgota)\r\n    clublocation = (clubshirota, clubdolgota)\r\n    dist = distance.distance(mylocation, clublocation).km\r\n    if dist < 1:\r\n        return dist*1000\r\n    else:\r\n        return round(dist,2)
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/func/geoloc.py b/func/geoloc.py
--- a/func/geoloc.py	(revision 8d99d49199e72bf1106061817c84aa203edd9f52)
+++ b/func/geoloc.py	(date 1633164872340)
@@ -5,7 +5,4 @@
     mylocation = (myshirota, mydolgota)
     clublocation = (clubshirota, clubdolgota)
     dist = distance.distance(mylocation, clublocation).km
-    if dist < 1:
-        return dist*1000
-    else:
-        return round(dist,2)
\ No newline at end of file
+    return round(dist,2)
\ No newline at end of file
